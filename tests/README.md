# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Banister Backend API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```cmd
docker-compose exec web python tests/run_all_tests.py
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:**

- `test_api.py` - –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, –ø—Ä–æ—Ñ–∏–ª—å, email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)
- `test_admin.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π (–ª–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)
- `test_permissions.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏)
- `test_drf_classes.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DRF –∫–ª–∞—Å—Å–æ–≤ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `test_pagination_minio.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ MinIO
- `test_notifications.py` - **–ù–û–í–û–ï!** –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å Firebase üîî
- `test_smtp_only.py` - SMTP –æ—Ç–ø—Ä–∞–≤–∫–∞ email
- `test_cron_only.py` - Cron –∑–∞–¥–∞—á–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- `test_backups.py` - –õ–æ–∫–∞–ª—å–Ω—ã–µ –±–µ–∫–∞–ø—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π
- `check_backup_files.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∫–∞–ø–æ–≤
- `run_all_tests.py` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å—Ä–∞–∑—É

### **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**

- `test_user.json` - JSON –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã

### **–ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:**

```bash
# –ë–∞–∑–æ–≤–æ–µ API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
docker-compose exec web python /app/tests/test_api.py

# –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
docker-compose exec web python /app/tests/test_admin.py

# –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
docker-compose exec web python /app/tests/test_permissions.py

# DRF –∫–ª–∞—Å—Å—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
docker-compose exec web python /app/tests/test_drf_classes.py
```

### **–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:**

```bash
docker-compose exec web python tests/run_all_tests.py
```

**‚ö° –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ 10 —Ç–µ—Å—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

## ‚úÖ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### **1. –ë–∞–∑–æ–≤–æ–µ API (test_api.py):**
- POST `/api/v1/auth/register/` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- POST `/api/v1/auth/login/` - –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- GET `/api/v1/auth/profile/` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- POST `/api/v1/auth/send-verification/` - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

### **2. –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (test_admin.py):**
- POST `/api/v1/auth/login/` - –õ–æ–≥–∏–Ω —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞
- PATCH `/api/v1/auth/admin/update-profile/` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∞–¥–º–∏–Ω–∞
- GET `/api/v1/auth/admin/permissions/` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- GET `/api/v1/users/` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ModelViewSet)

### **3. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (test_permissions.py):**
- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∞
- POST `/api/v1/auth/admin/manage-permissions/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–¥–æ–º

### **4. DRF –∫–ª–∞—Å—Å—ã (test_drf_classes.py):**
- CreateAPIView - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- RetrieveAPIView - –ø—Ä–æ—Ñ–∏–ª—å
- APIView - refresh token
- ModelViewSet - CRUD –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Swagger UI –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

### **5. –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ MinIO (test_pagination_minio.py):**
- GET `/api/v1/users/?page=1&page_size=3` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤
- POST `/api/v1/auth/upload-photo/` - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ç–æ
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ MinIO –±–∞–∫–µ—Ç–æ–≤

### **6. üîî –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (test_notifications.py):**
- POST `/api/v1/notifications/` - –°–æ–∑–¥–∞–Ω–∏–µ + Firebase push
- GET `/api/v1/notifications/` - –°–ø–∏—Å–æ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- POST `/api/v1/notifications/{id}/mark_read/` - –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- DELETE `/api/v1/notifications/{id}/` - –£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- POST `/api/v1/notifications/mark_all_read/` - –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ
- DELETE `/api/v1/notifications/delete_all/` - –£–¥–∞–ª–∏—Ç—å –≤—Å–µ
- GET `/api/v1/notifications/unread/` - –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ

### **7. üìß SMTP –æ—Ç–ø—Ä–∞–≤–∫–∞ (test_smtp_only.py):**
- SMTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ email

### **8. ‚è∞ Cron –∑–∞–¥–∞—á–∏ (test_cron_only.py):**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Celery beat —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- database-backup: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –ø–æ–ª–Ω–æ—á—å
- minio-backup: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –ø–æ–ª–Ω–æ—á—å
- cleanup-old-notifications: –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ

### **9. üíæ –õ–æ–∫–∞–ª—å–Ω—ã–µ –±–µ–∫–∞–ø—ã (test_backups.py):**
- –°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∫–∞–ø–æ–≤ PostgreSQL + MinIO
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 —Ñ–∞–π–ª–æ–≤)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Docker volume `/app/backups`

### **10. üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∫–∞–ø–æ–≤ (check_backup_files.py):**
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∫–∞–ø–æ–≤
- –†–∞–∑–º–µ—Ä—ã –∏ –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è
- –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –≤ Docker volume

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**‚úÖ –ü–†–û–ô–î–ï–ù–û: 10/10 –¢–ï–°–¢–û–í**

**–î–∞—Ç–∞:** 20.08.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç!  
**–ù–æ–≤–æ–µ:** üîî –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å Firebase  
**–ë–µ–∫–∞–ø—ã:** üíæ –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π  
**API endpoints:** 25+ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤